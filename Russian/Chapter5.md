# 5. Фронт-энд для разработки игр Klaytn Addition
 
## 5.1 Настройки


Теперь, когда вы создали контракт, который будет использоваться для BApp в предыдущих классах, давайте сделаем предварительную разработку.
Сначала давайте приступим к базовой настройке.
В этом уроке я скачаю node.js, npm, инфраструктуру Truffle и код Visual Studio.
Node.js - это серверная JavaScript-платформа, которая нам реально нужна для нашего BApp.
Npm устанавливается вместе с node.js, который необходим для загрузки инструментов и библиотек во время разработки.
Платформа Truffle, которую мы будем устанавливать, также должна быть загружена через npm.
Если у вас уже установлены node.js и npm, проверьте версию и пропустите этот раздел, если node.js версии 8 или выше, а npm версии 5 или выше.


Пожалуйста, зайдите на https://nodejs.org и загрузите 10.15.3 LTS. Затем установите его.
Я уже сделал это, и поэтому я пропускаю этот шаг.
После установки мы проверим, правильно ли установлен node.js в PowerShell.
Введите Node-v и проверьте версию. а также проверьте Npm. Npm -v, да, он установлен правильно.


Наконец, я установлю Truffle.
Truffle - это фреймворк, который помогает вам легко развивать BApp.
Truffle позволяет вам компилировать, тестировать и развертывать смарт контракты.
Это очень популярный фреймворк.
Версия Truffle недавно была обновлена до 5.
Однако, поскольку Klaytn был разработан для версии 4, я буду использовать версию Truffle 4.
Если у вас уже установлена версия 4 или менее или 5, сначала необходимо удалить ее.
Удалите ее, введя `npm uninstall -g truffle` в PowerShell.
Теперь вставьте «npm install -g truffle@4.1.15», после установки вы получите версию 4.


Если вы все загрузили, проверьте версию с помощью команды версии Truffle.
Это версия 4.1.15, а компилятор solidity  - версия 0.4.25.
solidity  - это язык программирования, с помощью которого вы можете писать умные контракты. Наконец, давайте загрузим лучший редактор кода,  Visual Studio. Зайдите на https://code.visualstudio.com/ для загрузки под Windows.
Я скачал его заранее. Так что я тоже пропущу эту часть.
Если вы загрузили его, пожалуйста, установите и запустите.
Код Visual Studio поддерживает кроссплатформенность, поэтому работает на Linux, Windows, Mac и включает ряд полезных функций, таких как поддержка отладки, управление git, подсветка синтаксиса и многое другое.




Теперь нажмите на вкладку расширения, чтобы установить расширение для поддержки языка solidity. Пожалуйста, введите «solidity» и выберите тот, что сверху.
Нажмите Установить. Это расширение обеспечивает цветовую подсветку для каждого элемента грамматики solidity и позволяет вам компилировать.
Установка завершена. Я закончил сеанс настройки, который необходим для фронт-энд разработки.
 
 
## 5.2 Скачать шаблон
 
 
Давайте скачаем boiler plate, базовый шаблон для разработки.
Klaytn  говорит, что BApp может быть разработан в рамках Truffle.
 В Truffle есть несколько мест, где вы можете скачать стандартные шаблоны для вашей разработки BApp.
 Это называется Truffle Box.
«Https://truffleframework.com/boxes»
Если Вы зашли по ссылке, Вы можете увидеть шаблоны.
 Например, если вы хотите разработать BApp с использованием Angular или React, вы можете загрузить подходящий вам шаблон.
Однако загруженные здесь шаблоны специализируются на приложении Ethereum, поэтому вам необходимо загрузить их и стереть внутренние части.
 Затем Вы должны настроить шаблон для Klaytn.
Это не сложная часть, но я заранее скачал шаблон под названием webpack
и изменил его «Klaytn way», чтобы вписаться в нашу лекцию.
 Я загрузил его на Github, чтобы вы могли скачать его.
 Для справки, мы продолжим работу с нативным JavaScript и JQuery.
 Даже если вы новичок в этом, вы можете легко следовать за нами
 
Откройте PowerShell и выполните команду git clone в «https://github.com/kkagill/addition-game-starter.git» в том месте, куда вы хотите его скачать.
Я все это уже скачал.
Сделайте «Cd addition-game-starter», чтобы войти в патч. Теперь код. Давайте посмотрим на структуру, вставив «code».
Позвольте мне начать сверху вниз.
В папке «Contracts » хранятся файлы контрактов на solidity
У нас есть файл контракта «Addition Game», который мы создали, и у нас есть контракт под названием «migrations», который позволит вам запускать файлы сценариев в папке миграций ниже, когда вы развертываете свой смарт-контракт.
Это необходимый файл для развертывания контракта, поэтому вы никогда не должны его удалять.
 
Далее, файлы сценариев в папке `migrations` содержат логику, используемую в процессе развертывания.
Если вы видите этот файл, он импортирует файл контракта миграции и развертывает его содержимое на ноде Klaytn.
Внутри папки src я настроил структуру, которая состоит из внешнего интерфейса BApp. Файл index.html будет отвечать за первичное представление.
Я загрузил jquery и bootstrap для использования в BApp вместе с cdn и заранее добавил часть css ниже.
 
Файл Index.js похож на движок - он выполняет функции.
Мы уже определили имена функций, которые мы напишем в будущем.
Переменная внизу - это переменная конфигурации, которая показывает счетчик при загрузке. Это не самая важная часть, поэтому я добавил ее заранее.
В package.json вы добавляете необходимые зависимости через npm.
Важно то, что вы загрузите файл библиотеки, который позволит вам общаться с caver-js, блокчейном Klaytn.
Это похоже на web3 js Ethereum.
Truffle.js отвечает за настройку среды.
Через Truffle вы будете определять, в каких сетях будут внедряться интеллектуальные контракты.
Я расскажу об этом в следующей лекции.
Webpack оптимизирует файлы и обнаруживает изменения в коде и отображает изменения в браузере, не обновляя страницы.
До сих пор я загружал и объяснял стартовый шаблон для создания приложения игры Klaytn BApp.
 



## 5.3 Развертывание смартконтракта на Baobab 1
 
Теперь давайте развернем смартконтракт AdditionGame, который мы формирем в тестовой сети Baobab. Прежде чем мы начнем, мы запустим команду npm install в терминале и установим необходимые зависимости для BApp.
Если вы не видите терминал ниже, выберите новый терминал на вкладке Терминал.
Теперь запустите команду установки npm.
Это займет некоторое время. По завершении создается папка с именем «node_modules» и установка завершается.
 
 
 
Сначала давайте создадим новый файл в папке миграций.
 Щелкните правой кнопкой мыши папку «Миграция» и выберите «Новый файл». Установите имя  «2_deploy_contracts.js», и мы добавим логику для развертывания контракта AdditionGame на ноде.
 
Перейдите к файлу `Initial migrations`, скопируйте и вставьте все коды.
Пожалуйста, измените его на «importing the AdditionGame contract».
Замените часть, которая будет развернута, на `AdditionGame`. Пока основная логика для развертывания закончена.
Тем не менее, я напишу определенный код в некоторые файлы в BApp для хранения информации, которую я получаю в процессе развертывания. Позже это может быть очень полезно для создания экземпляров контрактов с этой информацией.
deployer.deploy (AdditionGame)
 
